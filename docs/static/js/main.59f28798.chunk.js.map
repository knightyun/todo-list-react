{"version":3,"sources":["components/Header.js","components/TodoContext.js","components/Main.js","components/Footer.js","App.js","serviceWorker.js","index.js"],"names":["Header","props","state","todo","handleSubmit","bind","handleChange","evt","preventDefault","this","setState","pre","trim","length","onAddTodo","target","value","onSubmit","className","type","onChange","placeholder","React","Component","TodoContext","createContext","Main","doingLists","todoLists","doneLists","DoingTodo","lists","listType","DoneTodo","TodoList","elLists","Array","prototype","map","call","item","idx","key","onDelItem","context","handleDelItem","onExchangeList","handleExchangeList","onRenameTodo","handleRenameTodo","contextType","TodoListItem","isInput","inputRef","createRef","dataTransfer","setData","console","log","draggable","onDragStart","handleDragStart","onDrop","handleDrop","onClick","checked","ref","onBlur","current","focus","Footer","href","onCLearTodo","App","localStorage","JSON","parse","handleAddTodo","handleClearTodo","handlers","concat","reverse","_doneLists","slice","splice","_todoLists","newTodo","setItem","stringify","Provider","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","root","document","querySelector","ReactDOM","render","StrictMode","URL","process","origin","addEventListener","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.59f28798.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nclass Header extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      todo: ''\r\n    }\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  // 新增 todo\r\n  handleSubmit(evt) {\r\n    evt.preventDefault();\r\n\r\n    // 处理空白字符\r\n    this.setState(pre => ({\r\n      todo: pre.todo.trim()\r\n    }), () => {\r\n      // 非空则提交\r\n      if (this.state.todo.length > 0) {\r\n        // 调用父组件方法\r\n        this.props.onAddTodo(this.state.todo);\r\n        // 清空输入\r\n        this.setState({\r\n          todo: ''\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  handleChange(evt) {\r\n    this.setState({\r\n      todo: evt.target.value\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <header>\r\n        <form onSubmit={this.handleSubmit}>\r\n          <label className=\"header-label\">ToDoList</label>\r\n          <input className=\"header-input\" type=\"text\"\r\n            onChange={this.handleChange}\r\n            value={this.state.todo}\r\n            placeholder=\"添加 ToDo\"\r\n          />\r\n        </form>\r\n      </header>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\n\r\n// 创建 context，将数据传递给深层组件；\r\nexport const TodoContext = React.createContext();","import React from 'react';\r\nimport { TodoContext } from './TodoContext';\r\n\r\nclass Main extends React.Component {\r\n  render() {\r\n    return (\r\n      <main>\r\n        <DoingTodo\r\n          doingLists={this.props.todoLists}\r\n        />\r\n        <DoneTodo\r\n          doneLists={this.props.doneLists}\r\n        />\r\n      </main>\r\n    )\r\n  }\r\n}\r\n\r\n// 正在进行模块\r\nclass DoingTodo extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"doing\">\r\n        <div className=\"doing-head\">\r\n          <div className=\"head-text\">正在进行</div>\r\n          <div className=\"head-num\">\r\n            {this.props.doingLists.length}\r\n          </div>\r\n        </div>\r\n        <TodoList\r\n          lists={this.props.doingLists}\r\n          className=\"doing-list\"\r\n          listType=\"todoList\"\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n// 已经完成模块\r\nclass DoneTodo extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"done\">\r\n        <div className=\"done-head\">\r\n          <div className=\"head-text\">正在进行</div>\r\n          <div className=\"head-num\">\r\n            {this.props.doneLists.length}\r\n          </div>\r\n        </div>\r\n        <TodoList\r\n          lists={this.props.doneLists}\r\n          className=\"done-list\"\r\n          listType=\"doneList\"\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n// 复用的列表组件\r\nclass TodoList extends React.Component {\r\n  // 声明之后，内部可以使用 this.context 访问 Provider 传入的 value\r\n  static contextType = TodoContext;\r\n  \r\n  render() {\r\n    // 获取列表项目内容\r\n    var lists = this.props.lists || [];\r\n    var elLists = Array.prototype.map.call(\r\n      lists,\r\n      (item, idx) => (\r\n        <TodoListItem\r\n          item={item} key={idx} idx={idx}\r\n          listType={this.props.listType}\r\n          onDelItem={this.context.handleDelItem}\r\n          onExchangeList={this.context.handleExchangeList}\r\n          onRenameTodo={this.context.handleRenameTodo}\r\n        />\r\n      )\r\n    );\r\n    return (\r\n      <ul className={this.props.className}>\r\n        {elLists}\r\n      </ul>\r\n    )\r\n  }\r\n}\r\n\r\n// TodoList.contextType = TodoContext;\r\n\r\n// 复用的列表单项组件\r\nclass TodoListItem extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      // 处理可编辑状态\r\n      isInput: false\r\n    }\r\n    this.inputRef = React.createRef();\r\n  }\r\n\r\n  handleDragStart(evt) {\r\n    evt.dataTransfer.setData('text/plain', 'hello')\r\n  }\r\n\r\n  handleDrop(evt) {\r\n    console.log()\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <li className=\"todo-list-item\" draggable=\"true\"\r\n        onDragStart={() => this.handleDragStart()}\r\n        onDrop={() => this.handleDrop()}\r\n      >\r\n        {/* 标记完成或待做 */}\r\n        {\r\n          this.props.listType === 'todoList' ?\r\n            <input type=\"checkbox\" className=\"item-check\"\r\n              onClick={(evt) =>\r\n                this.props.onExchangeList(\r\n                  this.props.idx,\r\n                  this.props.listType,\r\n                  evt\r\n                )\r\n              }\r\n            /> :\r\n            <input type=\"checkbox\" className=\"item-check\"\r\n              onChange={(evt) =>\r\n                this.props.onExchangeList(\r\n                  this.props.idx,\r\n                  this.props.listType,\r\n                  evt\r\n                )\r\n              } \r\n              checked\r\n            />\r\n        }\r\n        {/* 内容编辑状态切换 */}\r\n        {\r\n          this.state.isInput ?\r\n            <input className=\"item-content-input\"\r\n              value={this.props.item} ref={this.inputRef}\r\n              onChange={evt => this.props.onRenameTodo(\r\n                this.props.idx, this.props.listType, evt\r\n              )}\r\n              onBlur={() => this.setState({\r\n                isInput: !this.state.isInput\r\n              })}\r\n            /> :\r\n            <p className=\"item-content-p\"\r\n              onClick={() => {\r\n                this.setState({\r\n                  isInput: !this.state.isInput\r\n                }, () => {\r\n                  this.inputRef.current.focus();\r\n                });\r\n              }}\r\n            >{this.props.item}</p>\r\n        }\r\n        {/* 删除项目 */}\r\n        <span className=\"item-delete\"\r\n          onClick={() =>\r\n            this.props.onDelItem(\r\n              this.props.idx,\r\n              this.props.listType\r\n            )\r\n          }\r\n        >X</span>\r\n      </li>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Main;","import React from 'react';\r\n\r\nclass Footer extends React.Component {\r\n  render() {\r\n    return (\r\n      <footer>\r\n        <span>\r\n          Copyright &copy; 2020\r\n                    <a className=\"author\" href=\"https://github.com/knightyun\">\r\n            knightyun.\r\n                    </a>\r\n        </span>\r\n        <span className=\"clear-todo\"\r\n          onClick={this.props.onCLearTodo}\r\n        >clear</span>\r\n      </footer>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Footer;","import React from 'react';\nimport Header from './components/Header';\nimport Main from './components/Main';\nimport Footer from './components/Footer';\nimport { TodoContext } from './components/TodoContext';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    // 获取本地存储数据\n    var todo = {\n      todoLists: [], // 待做项\n      doneLists: []  // 完成项\n    }\n    this.state = localStorage.todo ?\n      JSON.parse(localStorage.todo) : todo;\n\n    this.handleAddTodo = this.handleAddTodo.bind(this);\n    this.handleDelItem = this.handleDelItem.bind(this);\n    this.handleExchangeList = this.handleExchangeList.bind(this);\n    this.handleRenameTodo = this.handleRenameTodo.bind(this);\n    this.handleClearTodo = this.handleClearTodo.bind(this);\n\n    this.handlers = {\n      handleDelItem: this.handleDelItem,\n      handleExchangeList: this.handleExchangeList,\n      handleRenameTodo: this.handleRenameTodo,\n    }\n  }\n\n  /**\n   * 新增 todo 项（正在进行）\n   *\n   * @param {string} item - todo 项目\n   * @memberof App\n   */\n  handleAddTodo(item) {\n    this.setState(pre => ({\n      todoLists: Array.prototype.concat.call(\n        pre.todoLists, item\n      ).reverse()\n    }), () => {\n      // 由于 setState 是异步的，同步任务中不能马上得到当前改变值，\n      // 设置在回调函数中执行\n      // console.log('todoLists:', this.state.todoLists);\n    });\n  }\n\n  /**\n   * 删除 todo 单项（包括待做和已完成项）\n   * \n   * @param {number} idx  - 要删除的项目索引\n   * @param {string} type - 在指定列表中删除\n   * @memberof App\n   */\n  handleDelItem(idx, type) {\n    if (type === 'todoList') {\n      this.setState(pre => {\n        var _todoLists = pre.todoLists.slice();\n\n        Array.prototype.splice.call(_todoLists, idx, 1);\n\n        return { todoLists: _todoLists }\n      });\n      return;\n    }\n\n    if (type === 'doneList') {\n      this.setState(pre => {\n        var _doneLists = pre.doneLists.slice();\n\n        Array.prototype.splice.call(_doneLists, idx, 1);\n\n        return { doneLists: _doneLists }\n      });\n      return;\n    }\n  }\n\n  /**\n   * 切换项目待做或已完成状态\n   *\n   * @param {number} idx  - 要删除的项目索引\n   * @param {string} type - 在指定列表中删除\n   * @param {Event}  evt  - 事件对象\n   * @memberof App\n   */\n  handleExchangeList(idx, type, evt) {\n    evt.preventDefault();\n\n    // 待做切换完成\n    if (type === 'todoList') {\n      this.setState(pre => ({\n        doneLists: Array.prototype.concat.call(\n          pre.todoLists[idx],\n          pre.doneLists,\n        )\n      }));\n      this.handleDelItem(idx, type);\n    }\n\n    // 完成切换待做\n    if (type === 'doneList') {\n      this.setState(pre => ({\n        todoLists: Array.prototype.concat(\n          pre.todoLists,\n          pre.doneLists[idx]\n        )\n      }));\n      this.handleDelItem(idx, type);\n    }\n  }\n\n  /**\n   * 修改 todo 项内容（包括待做与完成项）\n   *\n   * @param {number} idx  - 要删除的项目索引\n   * @param {string} type - 在指定列表中删除\n   * @param {Event}  evt  - 事件对象\n   * @memberof App\n   */\n  handleRenameTodo(idx, type, evt) {\n    var newTodo = evt.target.value;\n\n    if (type === 'todoList') {\n      this.setState(pre => {\n        var _todoLists = pre.todoLists;\n\n        _todoLists[idx] = newTodo;\n\n        return { todoLists: _todoLists }\n      })\n    }\n    if (type === 'doneList') {\n      this.setState(pre => {\n        var _doneLists = pre.doneLists;\n\n        _doneLists[idx] = newTodo;\n\n        return { doneLists: _doneLists }\n      })\n    }\n  }\n\n  /**\n   * 清空所有 todo 项\n   *\n   * @memberof App\n   */\n  handleClearTodo() {\n    this.setState({\n      todoLists: [],\n      doneLists: []\n    })\n  }\n\n  render() {\n    // 本地存储 todo\n    var todo = this.state;\n    localStorage.setItem('todo', JSON.stringify(todo));\n\n    return (\n      // 包裹并列的组件:\n      // 使用 <React.Fragment></React.Fragment>\n      // 或者使用 <></>\n      //\n      // 使用外部申明的 context，用于在组件顶层传入数据\n      <TodoContext.Provider value={this.handlers}>\n        <Header onAddTodo={this.handleAddTodo} />\n        <Main\n          todoLists={this.state.todoLists}\n          doneLists={this.state.doneLists}\n        />\n        <Footer onCLearTodo={this.handleClearTodo} />\n      </TodoContext.Provider>\n    )\n  }\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nlet root = document.querySelector('#root');\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  root\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n\n// serviceWorker.unregister();\nserviceWorker.register();"],"sourceRoot":""}